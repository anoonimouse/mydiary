<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}mydiary.page{% endblock %}</title>

  <!-- Tailwind (CDN for quick prototyping) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- htmx -->
  <script src="https://unpkg.com/htmx.org@1.9.4"></script>

  <!-- Alpine.js for tiny interactive bits -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- QR code lib -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>

  {% block head %}{% endblock %}
</head>
<body class="bg-gradient-to-b from-pink-50 to-orange-50 text-slate-900 antialiased">
  <header class="sticky top-0 z-40 bg-opacity-60 backdrop-blur-md">
    <nav class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="{{ url_for('main.home') }}" class="flex items-center gap-3">
        <div class="font-black text-2xl tracking-tight">mydiary<span class="text-orange-500">.</span>page</div>
      </a>
      <div class="flex items-center gap-3">
        {% if current_user.is_authenticated %}
          <a href="{{ url_for('main.dashboard') }}" class="px-3 py-2 rounded-full bg-white/90 hover:scale-105 transition">Dashboard</a>
          <a href="{{ url_for('auth.logout') }}" class="px-3 py-2">Logout</a>
        {% else %}
          <a href="{{ url_for('auth.login') }}" class="px-3 py-2 rounded-full bg-white/90 hover:scale-105 transition">Log in</a>
        {% endif %}
      </div>
    </nav>
  </header>

  <main class="min-h-[80vh]">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="max-w-3xl mx-auto px-4 py-2">
          {% for category, msg in messages %}
            <div class="rounded-md p-3 my-2 text-sm {{ 'bg-green-100 text-green-800' if category=='success' else 'bg-red-100 text-red-800' }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="mt-8 bg-white/80">
    <div class="max-w-6xl mx-auto px-4 py-6 flex justify-between items-center">
      <div>
        <strong>mydiary.page</strong> â€” real friends, real fun
      </div>
      <div class="flex gap-4 text-sm">
        <a href="{{ url_for('main.home') }}">Home</a>
        <a href="{{ url_for('main.home') }}#safety">Safety</a>
        <a href="{{ url_for('main.home') }}#about">About</a>
      </div>
    </div>
  </footer>
</body>
</html>
